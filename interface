import tkinter as tk
import random
#FONCTIONS COULEURS


def get_ticket_colors():
    """
    Retourne un dictionnaire avec les couleurs du ticket.
    Tu peux changer ici pour cr√©er d'autres th√®mes.
    """
    return {
        "background": "#FFEE88",     # Jaune "ticket √† gratter"
        "button_bg": "#FFD700",      # Or
        "button_fg": "black",
        "result_text": "#222222",
        "window_bg": "#FFF9C4",      # Fond doux
        "border_color": "#C6A700"
    }


def apply_window_theme(root, colors):
    """Applique les couleurs au fond de la fen√™tre."""
    root.config(bg=colors["window_bg"])


def apply_ticket_style(button, result_label, colors):
    """Applique le style visuel du ticket et du texte."""
    button.config(
        bg=colors["button_bg"],
        fg=colors["button_fg"],
        activebackground=colors["border_color"],
        relief="groove",
        bd=4
    )

    result_label.config(
        fg=colors["result_text"],
        bg=colors["window_bg"]
    )



# FONCTIONS INTERFACE


def create_window():
    root = tk.Tk()
    root.title("Ticket √† Gratter")
    root.geometry("900x1000")
    root.resizable(False, False)

    # Appliquer la couleur g√©n√©rale
    colors = get_ticket_colors()
    apply_window_theme(root, colors)

    return root


def create_title(root, colors):
    label = tk.Label(root, text="üéüÔ∏èTicket √† gratter 3 euros ",
                     font=("Arial", 50, "bold"),
                     bg=colors["window_bg"], fg="black")
    label.pack(pady=50)


def create_scratch_button(root, colors):
    global scratch_button

    scratch_button = tk.Button(
        root, text=" Gratte fils", font=("Arial", 50),
        width=15, height=3, command=reveal_prize
    )
    scratch_button.pack(pady=15)

    return scratch_button


def create_result_label(root, colors):
    global result_label

    result_label = tk.Label(root, text="", font=("Arial", 16),
                            bg=colors["window_bg"])
    result_label.pack(pady=100)

    return result_label


def create_action_buttons(root, colors):
    frame = tk.Frame(root, bg=colors["window_bg"])
    frame.pack(pady=10)

    btn2 = tk.Button(frame, text="Nouveau ticket", font=("Arial", 30),
                     command=new_ticket,
                     bg=colors["button_bg"])
    btn2.grid(row=0, column=1, padx=10)



#FONCTIONS LOGIQUES DU JEU


def new_ticket():
    global current_prize, prize_revealed

    # Pb : 90 % de 0$
    prizes = [0] * 9 + [1, 5, 10, 500000000, "cigaretes"]
    current_prize = random.choice(prizes)

    prize_revealed = False
    scratch_button.config(text=" Gratte fils", state="normal")
    result_label.config(text="")


def reveal_prize():
    """Affiche le gain quand on gratte."""
    global prize_revealed

    if prize_revealed:
        return

    prize_revealed = True
    scratch_button.config(state="disabled")

    result_label.config(text=f"Gain : {current_prize} $" , font=("Arial", 30, "bold") )



#PROGRAMME PRINCIPAL


root = create_window()
colors = get_ticket_colors()

create_title(root, colors)
scratch_button = create_scratch_button(root, colors)
result_label = create_result_label(root, colors)
create_action_buttons(root, colors)

# style du ticket
apply_ticket_style(scratch_button, result_label, colors)

new_ticket()
root.mainloop()

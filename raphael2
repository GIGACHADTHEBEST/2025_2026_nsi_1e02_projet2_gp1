import random
import tkinter as tk

PRIX_TICKET = 5

lots = [
    (0, 0.737),
    (5, 0.102),
    (10, 0.119),
    (20, 0.0277),
    (50, 0.0074),
    (100, 0.0074),
    (500, 0.0001),
    (5000, 0.0000004),
    (10000, 0.0000002),
    (100000, 0.0000001),
    (500000, 0.00000016)
]

def gratter_ticket():
    r = random.random()
    cumul = 0
    for gain, proba in lots:
        cumul += proba
        if r <= cumul:
            return gain
    return 0

tickets = 0
argent_net = 0

def gratter_n(n):
    global tickets, argent_net

    gain_total = 0
    depense = n * PRIX_TICKET

    for _ in range(n):
        gain = gratter_ticket()
        gain_total += gain
        argent_net += gain - PRIX_TICKET
        tickets += 1

    argent_depense_total = tickets * PRIX_TICKET

    # Affichage rÃ©sultat
    if n == 1:
        if gain_total == 0:
            resultat_label.config(text="âŒ Perdu\n0 â‚¬", fg="red")
        else:
            resultat_label.config(text=f"ðŸŽ‰ GagnÃ©\n{gain_total} â‚¬", fg="green")
    else:
        resultat_label.config(
            text=f"ðŸŽŸï¸ {n} tickets grattÃ©s\nGain sur {depense} â‚¬ dÃ©pensÃ©s : {gain_total} â‚¬",
            fg="blue"
        )

    # Argent net global
    if argent_net > 0:
        net_text = f"ðŸ’š Argent gagnÃ© : {argent_net} â‚¬"
        couleur = "green"
    elif argent_net < 0:
        net_text = f"ðŸ’¸ Argent perdu : {-argent_net} â‚¬"
        couleur = "red"
    else:
        net_text = "âš–ï¸ Ni gain ni perte"
        couleur = "black"

    stats_label.config(
        text=(
            f"Tickets grattÃ©s : {tickets}\n"
            f"Prix total des tickets : {argent_depense_total} â‚¬\n"
            f"{net_text}"
        ),
        fg=couleur
    )

# FenÃªtre
fenetre = tk.Tk()
fenetre.title("ðŸŽŸï¸ Ticket Ã  gratter")
fenetre.geometry("460x360")
fenetre.resizable(False, False)

tk.Label(
    fenetre,
    text="JEU DE TICKETS Ã€ GRATTER DU JEU CASH",
    font=("Arial", 16, "bold")
).pack(pady=10)

resultat_label = tk.Label(
    fenetre,
    text="Clique pour gratter",
    font=("Arial", 18),
    fg="blue"
)
resultat_label.pack(pady=15)

frame = tk.Frame(fenetre)
frame.pack(pady=10)

tk.Button(
    frame,
    text="ðŸŽŸï¸ Gratter 1 ticket (5 â‚¬)",
    font=("Arial", 12),
    bg="#FFD700",
    command=lambda: gratter_n(1)
).grid(row=0, column=0, padx=10)

tk.Button(
    frame,
    text="ðŸš€ Gratter 100 tickets (500 â‚¬)",
    font=("Arial", 12),
    bg="#FFB347",
    command=lambda: gratter_n(100)
).grid(row=0, column=1, padx=10)

stats_label = tk.Label(
    fenetre,
    text=(
        "Tickets grattÃ©s : 0\n"
        "Prix total des tickets : 0 â‚¬\n"
        "âš–ï¸ Ni gain ni perte"
    ),
    font=("Arial", 12),
    justify="left"
)
stats_label.pack(pady=15)

fenetre.mainloop()
